# 调试模式

调试模式是 Dify Chat 提供的开发调试功能，允许开发者在本地环境中使用自定义的应用配置进行测试，而无需依赖真实的 Dify 服务器。

## 功能特点

- **条件显示**：只有在 URL 中添加 `?isDebug=true` 参数时才显示调试按钮
- **悬浮按钮**：使用 FloatButton 实现，固定在页面左下角，不影响页面布局
- **配置管理**：支持 JSON 格式的应用配置编辑和保存
- **本地存储**：配置数据保存在浏览器的 localStorage 中
- **自动刷新**：保存配置后自动刷新页面以应用新设置

## 启用调试模式

要启用调试模式，需要在浏览器地址栏的 URL 中添加 `isDebug=true` 参数：

```
http://localhost:5200/dify-chat/?isDebug=true
```

启用后，页面左下角会出现一个带有虫子图标的悬浮按钮。

## 配置应用

点击调试按钮会打开配置抽屉，你可以在其中编辑应用配置。

### 配置格式

应用配置需要符合 JSON 格式，并且是一个数组，每个应用对象需要包含以下字段：

```json
[
  {
    "info": {
      "name": "调试应用示例",
      "description": "这是一个调试模式下的示例应用",
      "tags": ["调试", "示例"],
      "mode": "chatbot"
    },
    "requestConfig": {
      "apiBase": "https://api.dify.ai/v1",
      "apiKey": "app-your-api-key-here"
    }
  }
]
```

### 字段说明

- **info**: 应用基本信息
  - `name`: 应用名称
  - `description`: 应用描述
  - `tags`: 应用标签数组
  - `mode`: 应用模式（如 "chatbot", "workflow", "agent" 等）
- **requestConfig**: API 请求配置
  - `apiBase`: Dify API 基础地址
  - `apiKey`: 应用的 API 密钥

### 操作步骤

1. 点击页面左下角的调试按钮
2. 在配置编辑器中输入或修改 JSON 配置
3. 可以点击"使用示例配置"按钮快速填入模板
4. 点击"保存配置"按钮保存设置
5. 页面会自动刷新，应用列表将显示配置的调试应用

## 使用场景

调试模式适用于以下场景：

- **本地开发**：在没有 Dify 服务器的情况下进行前端开发
- **功能测试**：测试不同应用配置下的界面表现
- **演示展示**：使用模拟数据进行产品演示
- **问题排查**：隔离服务器问题，专注于前端逻辑调试

## 注意事项

- 调试模式仅在开发环境中使用，生产环境不应启用
- 配置数据保存在浏览器本地，清除浏览器数据会丢失配置
- 调试应用的 API 密钥需要是真实有效的，才能正常进行对话
- 关闭调试模式（移除 URL 参数）后，调试按钮会自动隐藏

## 清除配置

要清除调试配置，可以：

1. 在配置编辑器中清空内容并保存
2. 或者直接在浏览器开发者工具中删除 `dify_debug_apps` 键值对

清除配置后，应用列表将恢复显示服务器端的真实应用数据。
